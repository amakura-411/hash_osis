<% provide(:title, 'All characters') %>
<h1>All characters</h1>
推しは見つかりましたか？　見つからない場合はぜひ
<%= link_to 'キャラ登録',new_character_path %>
をお願いします。
<br>
<h3>検索</h3>
<%= search_form_for @q,  url: search_characters_path do |f| %>
  <%= f.label :chara_name_or_appear_in_cont,'キャラ名/作品名',  :placeholder => 'キャラ名または作品名を記入したください'%>
  <%= f.search_field :chara_name_or_appear_in_cont %>
    <br>
  <%= f.submit '検索' %>
<% end %>

<ul class="characters">
<% if @character.present? %>
  <h4>#<%= @element %>  に関するキャラクター </h4>
    <% @character.each do |character| %>
      <%=link_to character.chara_name, character_path(character) %>
      <%= character.appear_in %>
      <p></p>
    <% end %>
<% else %>
  <% @characters.find_each do |character| %>
    <li>
      <h4><%= link_to character.chara_name, character_path(character) %>
      <% if user_signed_in? %>
        <% if character.favorited_by?(current_user)  %>
          <%= link_to character_favorites_path(character), method: :delete, class: "favorite_btn" do %>
          ♥<%= character.favorites.count %> いいね
          <% end %>
        <% else %>
          <%= link_to character_favorites_path(character), method: :post, class: "favorite_btn" do %>
          ♡<%= character.favorites.count %> いいね
          <% end %>
        <% end %>
      <% else %>
          <%= link_to character_favorites_path(character), method: :post, class: "favorite_btn" do %>
          ♡<%= character.favorites.count %> いいね
          <% end %>
      <% end %>
      <p></p>
      <%=character.appear_in %>
    </li>
  <% end %>
</ul>
<% end %>


<%= paginate @characters %>