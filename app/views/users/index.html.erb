<h1>ユーザー一覧</h1>

<div class="col-md-3">
    <%= search_form_for @q,  url:user_search_path do |f| %>
      <div class='accordion'>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#searchu"
              aria-expanded="false" aria-controls="searchu">
              ユーザー検索
            </button>
          </h2>
          <div id="searchu"  class='accordion-collapse collapse' aria-labelledby='searchu' data-bs-parent="#searchu">
            <div class='accordion-body'>
              <%= f.label :username_cont, 'ユーザー名' %>
              <%= f.search_field :username_cont %>
              <br>
              <%= f.submit '検索' %>
            </div>
          </div>
        </div>
      </div>
      <% end %>
  </div>
</div>
<div class='container'>
  <table class="table table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th scope='col'>ユーザーネーム</th>
        <th scope='col'>推し一覧</th>
      </tr>
    </thead>
    <% @users.find_each do |user| %>
      <tbody>
        <tr>
          <th scope='row'><%= user.id %></th>
          <td><%= user.username %></td>
          <td><%= link_to "#{user.username}の推し一覧", user_favorites_path(user)  %></td>
        </tr>
     </tbody>
     <% end %>
  </table>
</div>

<%= paginate @users %>